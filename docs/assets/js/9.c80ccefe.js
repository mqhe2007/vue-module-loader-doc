(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{369:function(t,a,s){"use strict";s.r(a);var e=s(44),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#api"}},[t._v("#")]),t._v(" API")]),t._v(" "),s("h2",{attrs:{id:"默认导出"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#默认导出"}},[t._v("#")]),t._v(" 默认导出")]),t._v(" "),s("p",[s("code",[t._v('function(app: App, Vue: Context["Vue"]) => void')])]),t._v(" "),s("p",[t._v("vue-module-loader 的默认导出函数通常被命名为 "),s("code",[t._v("vml")]),t._v("，作为 vue3 插件使用。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" vml "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue-module-loader"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vml"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"模块对象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#模块对象"}},[t._v("#")]),t._v(" 模块对象")]),t._v(" "),s("p",[t._v("模块对象，模块打包入口文件默认导出。")]),t._v(" "),s("ul",[s("li",[s("h3",{attrs:{id:"name"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#name"}},[t._v("#")]),t._v(" name")]),t._v(" "),s("p",[s("code",[t._v("string")])]),t._v(" "),s("p",[t._v("模块名必须与"),s("code",[t._v("package.name")]),t._v("，"),s("code",[t._v("vite.config.build.lib.name")]),t._v("保持一致。")])]),t._v(" "),s("li",[s("h3",{attrs:{id:"install"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#install"}},[t._v("#")]),t._v(" install")]),t._v(" "),s("p",[s("code",[t._v("(context: Context) => any")])]),t._v(" "),s("p",[t._v("模块加载安装时钩子，函数接收一个上下文对象，可以在此钩子内部自由发挥。另外，比较关键的一点是，此函数支持返回 Promise。")])]),t._v(" "),s("li",[s("h3",{attrs:{id:"uninstall"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#uninstall"}},[t._v("#")]),t._v(" uninstall")]),t._v(" "),s("p",[s("code",[t._v("(context: Context) => any")])]),t._v(" "),s("p",[t._v("模块卸载时钩子，函数接收一个上下文对象，可以再次做一些模块卸载善后工作。另外，比较关键的一点是，此函数也支持返回 Promise。")])])]),t._v(" "),s("h2",{attrs:{id:"具名方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#具名方法"}},[t._v("#")]),t._v(" 具名方法")]),t._v(" "),s("p",[t._v("从 "),s("code",[t._v("vue-module-loader")]),t._v(" 包导入")]),t._v(" "),s("h3",{attrs:{id:"usemodule"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usemodule"}},[t._v("#")]),t._v(" useModule")]),t._v(" "),s("p",[s("code",[t._v('function useModule(moduleData: string | ModuleOptions, Vue?: Context["Vue"]): Promise<void>')])]),t._v(" "),s("p",[t._v("动态加载一个微前端模块，参数支持两种方式：")]),t._v(" "),s("ul",[s("li",[t._v("模块远程 url 地址")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useModule "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue-module-loader"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useModule")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://static.mengqinghe.com/vml/module/vue-module-module.iife.js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("ul",[s("li",[t._v("本地 ESM")])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" localModule "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./module"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useModule")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("localModule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("注意：")]),t._v(" "),s("p",[t._v("当应用没有以插件方式安装 "),s("code",[t._v("vue-module-loader")]),t._v(" 时，首次使用 "),s("code",[t._v("useModule")]),t._v(" 必须传入第二个参数。")])]),t._v(" "),s("h3",{attrs:{id:"uninstall-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#uninstall-2"}},[t._v("#")]),t._v(" uninstall")]),t._v(" "),s("p",[s("code",[t._v("async function uninstall(moduleName: string)")])]),t._v(" "),s("p",[t._v("卸载一个动态模块，此方法返回 Promise。")]),t._v(" "),s("h3",{attrs:{id:"clear"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#clear"}},[t._v("#")]),t._v(" clear")]),t._v(" "),s("p",[s("code",[t._v("async function clear()")])]),t._v(" "),s("p",[t._v("卸载所有动态加载的模块，此方法返回 Promise。")]),t._v(" "),s("h3",{attrs:{id:"listunistaller"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#listunistaller"}},[t._v("#")]),t._v(" listUnistaller")]),t._v(" "),s("p",[s("code",[t._v("function listUnistaller()")])]),t._v(" "),s("p",[t._v("列出当前运行时已加载的模块清单，需要注意的是，返回 map 的 value 是模块的卸载器方法，不是整个模块对象。")])])}),[],!1,null,null,null);a.default=n.exports}}]);